"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/api/v1/seats/reservation/fcfs/route",{

/***/ "(rsc)/./app/api/v1/seats/reservation/fcfs/route.ts":
/*!****************************************************!*\
  !*** ./app/api/v1/seats/reservation/fcfs/route.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   fetchCache: () => (/* binding */ fetchCache),\n/* harmony export */   preferredRegion: () => (/* binding */ preferredRegion),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n// Mock FCFS seat reservation endpoint based on reservation_fcfs.md spec.\n// This is an in-memory simulation (non-persistent) to allow frontend integration & testing.\n// Concurrency caveat: In a real deployment you'd rely on a DB conditional UPDATE + Redis metrics.\nconst runtime = 'edge';\nconst preferredRegion = 'auto';\nconst fetchCache = 'default-no-store';\n// In-memory seat pool (initialize lazily to allow hot reload idempotence)\n// Default: 20 seats available\nconst globalAny = globalThis;\nif (!globalAny['__FCFS_SEATS__']) {\n    const initial = Array.from({\n        length: 20\n    }).map((_, i)=>({\n            id: i + 1,\n            status: false,\n            reserved_by: null\n        }));\n    globalAny['__FCFS_SEATS__'] = initial;\n    globalAny['__FCFS_METRICS__'] = {\n        attempts: 0,\n        successes: 0,\n        soldOut: 0,\n        contentionFails: 0,\n        already: 0\n    };\n}\nconst seats = globalAny['__FCFS_SEATS__'];\nconst metrics = globalAny['__FCFS_METRICS__'];\n// Config\nconst MAX_RETRIES = 5;\n// Helper to find if phone already reserved a seat\nfunction findSeatByPhone(phone) {\n    if (!phone) return undefined;\n    return seats.find((s)=>s.reserved_by === phone);\n}\nfunction nextAvailableSeat() {\n    return seats.find((s)=>!s.status);\n}\n// Simulate a small contention window: we randomize a micro delay and then \"lock\" by flipping status if still available.\nasync function attemptReserve(phone) {\n    // Very small random delay to emulate race\n    if (Math.random() < 0.2) {\n        await new Promise((r)=>setTimeout(r, Math.floor(Math.random() * 4)));\n    }\n    const seat = nextAvailableSeat();\n    if (!seat) return {\n        seat: null\n    };\n    if (seat.status) return {\n        seat: null\n    }; // lost race\n    // Assign\n    seat.status = true;\n    seat.reserved_by = phone || null;\n    return {\n        seat\n    };\n}\nasync function POST(req) {\n    let phone;\n    try {\n        if (req.headers.get('content-type')?.includes('application/json')) {\n            const body = await req.json().catch(()=>({}));\n            if (body && typeof body.phone === 'string') phone = body.phone.trim();\n        }\n    } catch  {\n    // Ignore malformed JSON and proceed with undefined phone\n    }\n    metrics['attempts']++;\n    // Already reserved by this phone?\n    const existing = findSeatByPhone(phone);\n    if (existing) {\n        metrics['already']++;\n        return Response.json({\n            success: false,\n            seat_id: existing.id,\n            reserved_by: existing.reserved_by,\n            reason: 'already_reserved'\n        });\n    }\n    // Quick sold out check\n    const anyAvailable = seats.some((s)=>!s.status);\n    if (!anyAvailable) {\n        metrics['soldOut']++;\n        return Response.json({\n            success: false,\n            seat_id: null,\n            reserved_by: null,\n            reason: 'sold_out'\n        });\n    }\n    // Retry loop\n    for(let attempt = 0; attempt < MAX_RETRIES; attempt++){\n        const { seat } = await attemptReserve(phone);\n        if (seat) {\n            metrics['successes']++;\n            return Response.json({\n                success: true,\n                seat_id: seat.id,\n                reserved_by: seat.reserved_by,\n                reason: null\n            });\n        }\n    }\n    // If we get here, treat as contention failure (rare in single-thread simulation but kept for spec compliance)\n    metrics['contentionFails']++;\n    return Response.json({\n        success: false,\n        seat_id: null,\n        reserved_by: phone ?? null,\n        reason: 'contention'\n    });\n}\n// (Optional) GET for debugging / metrics inspection while developing.\n// Added test helper: GET ?reset=1 will reinitialize the in-memory state (non-production feature).\nasync function GET(req) {\n    try {\n        const url = new URL(req.url);\n        if (url.searchParams.get('reset') === '1') {\n            // Reinitialize seats\n            for(let i = 0; i < seats.length; i++){\n                const seat = seats[i];\n                if (!seat) continue;\n                seat.status = false;\n                seat.reserved_by = null;\n            }\n            metrics.attempts = 0;\n            metrics.successes = 0;\n            metrics.soldOut = 0;\n            metrics.contentionFails = 0;\n            metrics.already = 0;\n        }\n    } catch  {}\n    return Response.json({\n        seats: seats.map((s)=>({\n                id: s.id,\n                status: s.status,\n                reserved_by: s.reserved_by\n            })),\n        metrics,\n        remaining: seats.filter((s)=>!s.status).length\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3YxL3NlYXRzL3Jlc2VydmF0aW9uL2ZjZnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSx5RUFBeUU7QUFDekUsNEZBQTRGO0FBQzVGLGtHQUFrRztBQUUzRixNQUFNQSxVQUFVLE9BQU87QUFDdkIsTUFBTUMsa0JBQWtCLE9BQU87QUFDL0IsTUFBTUMsYUFBYSxtQkFBbUI7QUFTN0MsMEVBQTBFO0FBQzFFLDhCQUE4QjtBQUM5QixNQUFNQyxZQUFZQztBQUNsQixJQUFJLENBQUNELFNBQVMsQ0FBQyxpQkFBaUIsRUFBRTtJQUNoQyxNQUFNRSxVQUFrQkMsTUFBTUMsSUFBSSxDQUFDO1FBQUVDLFFBQVE7SUFBRyxHQUFHQyxHQUFHLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTztZQUNoRUMsSUFBSUQsSUFBSTtZQUNSRSxRQUFRO1lBQ1JDLGFBQWE7UUFDZjtJQUNBWCxTQUFTLENBQUMsaUJBQWlCLEdBQUdFO0lBQzlCRixTQUFTLENBQUMsbUJBQW1CLEdBQUc7UUFDOUJZLFVBQVU7UUFDVkMsV0FBVztRQUNYQyxTQUFTO1FBQ1RDLGlCQUFpQjtRQUNqQkMsU0FBUztJQUNYO0FBQ0Y7QUFFQSxNQUFNQyxRQUFnQmpCLFNBQVMsQ0FBQyxpQkFBaUI7QUFTakQsTUFBTWtCLFVBQVVsQixTQUFTLENBQUMsbUJBQW1CO0FBRTdDLFNBQVM7QUFDVCxNQUFNbUIsY0FBYztBQUVwQixrREFBa0Q7QUFDbEQsU0FBU0MsZ0JBQWdCQyxLQUFnQztJQUN2RCxJQUFJLENBQUNBLE9BQU8sT0FBT0M7SUFDbkIsT0FBT0wsTUFBTU0sSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFYixXQUFXLEtBQUtVO0FBQzNDO0FBRUEsU0FBU0k7SUFDUCxPQUFPUixNQUFNTSxJQUFJLENBQUNDLENBQUFBLElBQUssQ0FBQ0EsRUFBRWQsTUFBTTtBQUNsQztBQUVBLHdIQUF3SDtBQUN4SCxlQUFlZ0IsZUFBZUwsS0FBZ0M7SUFDNUQsMENBQTBDO0lBQzFD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LEdBQUc7WUFDcEJLLFFBQVFKLE9BQU8sR0FBRztZQUNsQkksUUFBUUgsZUFBZSxHQUFHO1lBQzFCRyxRQUFRRixPQUFPLEdBQUc7UUFDcEI7SUFDRixFQUFFLE9BQU0sQ0FBMkI7SUFDbkMsT0FBTzRCLFNBQVNKLElBQUksQ0FBQztRQUNuQnZCLE9BQU9BLE1BQU1YLEdBQUcsQ0FBQ2tCLENBQUFBLElBQU07Z0JBQUVmLElBQUllLEVBQUVmLEVBQUU7Z0JBQUVDLFFBQVFjLEVBQUVkLE1BQU07Z0JBQUVDLGFBQWFhLEVBQUViLFdBQVc7WUFBQztRQUNoRk87UUFDQXFDLFdBQVd0QyxNQUFNdUMsTUFBTSxDQUFDaEMsQ0FBQUEsSUFBSyxDQUFDQSxFQUFFZCxNQUFNLEVBQUVMLE1BQU07SUFDaEQ7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2dpbS15dW5naS9SdXN0cm92ZXJQcm9qZWN0cy90aWNrZXR0b2NrL2Zyb250ZW5kL2FwcC9hcGkvdjEvc2VhdHMvcmVzZXJ2YXRpb24vZmNmcy9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBNb2NrIEZDRlMgc2VhdCByZXNlcnZhdGlvbiBlbmRwb2ludCBiYXNlZCBvbiByZXNlcnZhdGlvbl9mY2ZzLm1kIHNwZWMuXG4vLyBUaGlzIGlzIGFuIGluLW1lbW9yeSBzaW11bGF0aW9uIChub24tcGVyc2lzdGVudCkgdG8gYWxsb3cgZnJvbnRlbmQgaW50ZWdyYXRpb24gJiB0ZXN0aW5nLlxuLy8gQ29uY3VycmVuY3kgY2F2ZWF0OiBJbiBhIHJlYWwgZGVwbG95bWVudCB5b3UnZCByZWx5IG9uIGEgREIgY29uZGl0aW9uYWwgVVBEQVRFICsgUmVkaXMgbWV0cmljcy5cblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnZWRnZSc7XG5leHBvcnQgY29uc3QgcHJlZmVycmVkUmVnaW9uID0gJ2F1dG8nO1xuZXhwb3J0IGNvbnN0IGZldGNoQ2FjaGUgPSAnZGVmYXVsdC1uby1zdG9yZSc7XG5cbi8qKiBTZWF0IG1vZGVsIChzaW1wbGlmaWVkKSAqL1xuaW50ZXJmYWNlIFNlYXQge1xuICBpZDogbnVtYmVyO1xuICBzdGF0dXM6IGJvb2xlYW47IC8vIGZhbHNlID0gYXZhaWxhYmxlLCB0cnVlID0gcmVzZXJ2ZWRcbiAgcmVzZXJ2ZWRfYnk6IHN0cmluZyB8IG51bGw7IC8vIHBob25lXG59XG5cbi8vIEluLW1lbW9yeSBzZWF0IHBvb2wgKGluaXRpYWxpemUgbGF6aWx5IHRvIGFsbG93IGhvdCByZWxvYWQgaWRlbXBvdGVuY2UpXG4vLyBEZWZhdWx0OiAyMCBzZWF0cyBhdmFpbGFibGVcbmNvbnN0IGdsb2JhbEFueSA9IGdsb2JhbFRoaXMgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5pZiAoIWdsb2JhbEFueVsnX19GQ0ZTX1NFQVRTX18nXSkge1xuICBjb25zdCBpbml0aWFsOiBTZWF0W10gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyMCB9KS5tYXAoKF8sIGkpID0+ICh7XG4gICAgaWQ6IGkgKyAxLFxuICAgIHN0YXR1czogZmFsc2UsXG4gICAgcmVzZXJ2ZWRfYnk6IG51bGwsXG4gIH0pKTtcbiAgZ2xvYmFsQW55WydfX0ZDRlNfU0VBVFNfXyddID0gaW5pdGlhbDtcbiAgZ2xvYmFsQW55WydfX0ZDRlNfTUVUUklDU19fJ10gPSB7XG4gICAgYXR0ZW1wdHM6IDAsXG4gICAgc3VjY2Vzc2VzOiAwLFxuICAgIHNvbGRPdXQ6IDAsXG4gICAgY29udGVudGlvbkZhaWxzOiAwLFxuICAgIGFscmVhZHk6IDAsXG4gIH07XG59XG5cbmNvbnN0IHNlYXRzOiBTZWF0W10gPSBnbG9iYWxBbnlbJ19fRkNGU19TRUFUU19fJ10gYXMgU2VhdFtdO1xuaW50ZXJmYWNlIE1ldHJpY3Mge1xuICBhdHRlbXB0czogbnVtYmVyO1xuICBzdWNjZXNzZXM6IG51bWJlcjtcbiAgc29sZE91dDogbnVtYmVyO1xuICBjb250ZW50aW9uRmFpbHM6IG51bWJlcjtcbiAgYWxyZWFkeTogbnVtYmVyO1xuICBbazogc3RyaW5nXTogbnVtYmVyOyAvLyBhbGxvdyBmdXR1cmUgY291bnRlcnNcbn1cbmNvbnN0IG1ldHJpY3MgPSBnbG9iYWxBbnlbJ19fRkNGU19NRVRSSUNTX18nXSBhcyBNZXRyaWNzO1xuXG4vLyBDb25maWdcbmNvbnN0IE1BWF9SRVRSSUVTID0gNTtcblxuLy8gSGVscGVyIHRvIGZpbmQgaWYgcGhvbmUgYWxyZWFkeSByZXNlcnZlZCBhIHNlYXRcbmZ1bmN0aW9uIGZpbmRTZWF0QnlQaG9uZShwaG9uZTogc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFNlYXQgfCB1bmRlZmluZWQge1xuICBpZiAoIXBob25lKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4gc2VhdHMuZmluZChzID0+IHMucmVzZXJ2ZWRfYnkgPT09IHBob25lKTtcbn1cblxuZnVuY3Rpb24gbmV4dEF2YWlsYWJsZVNlYXQoKTogU2VhdCB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiBzZWF0cy5maW5kKHMgPT4gIXMuc3RhdHVzKTtcbn1cblxuLy8gU2ltdWxhdGUgYSBzbWFsbCBjb250ZW50aW9uIHdpbmRvdzogd2UgcmFuZG9taXplIGEgbWljcm8gZGVsYXkgYW5kIHRoZW4gXCJsb2NrXCIgYnkgZmxpcHBpbmcgc3RhdHVzIGlmIHN0aWxsIGF2YWlsYWJsZS5cbmFzeW5jIGZ1bmN0aW9uIGF0dGVtcHRSZXNlcnZlKHBob25lOiBzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKSB7XG4gIC8vIFZlcnkgc21hbGwgcmFuZG9tIGRlbGF5IHRvIGVtdWxhdGUgcmFjZVxuICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMikge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHIgPT4gc2V0VGltZW91dChyLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSkpO1xuICB9XG4gIGNvbnN0IHNlYXQgPSBuZXh0QXZhaWxhYmxlU2VhdCgpO1xuICBpZiAoIXNlYXQpIHJldHVybiB7IHNlYXQ6IG51bGwgfSBhcyBjb25zdDtcbiAgaWYgKHNlYXQuc3RhdHVzKSByZXR1cm4geyBzZWF0OiBudWxsIH0gYXMgY29uc3Q7IC8vIGxvc3QgcmFjZVxuICAvLyBBc3NpZ25cbiAgc2VhdC5zdGF0dXMgPSB0cnVlO1xuICBzZWF0LnJlc2VydmVkX2J5ID0gcGhvbmUgfHwgbnVsbDtcbiAgcmV0dXJuIHsgc2VhdCB9IGFzIGNvbnN0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgbGV0IHBob25lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHRyeSB7XG4gICAgaWYgKHJlcS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk/LmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcbiAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgaWYgKGJvZHkgJiYgdHlwZW9mIGJvZHkucGhvbmUgPT09ICdzdHJpbmcnKSBwaG9uZSA9IGJvZHkucGhvbmUudHJpbSgpO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gSWdub3JlIG1hbGZvcm1lZCBKU09OIGFuZCBwcm9jZWVkIHdpdGggdW5kZWZpbmVkIHBob25lXG4gIH1cblxuICBtZXRyaWNzWydhdHRlbXB0cyddKys7XG5cbiAgLy8gQWxyZWFkeSByZXNlcnZlZCBieSB0aGlzIHBob25lP1xuICBjb25zdCBleGlzdGluZyA9IGZpbmRTZWF0QnlQaG9uZShwaG9uZSk7XG4gIGlmIChleGlzdGluZykge1xuICBtZXRyaWNzWydhbHJlYWR5J10rKztcbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIHNlYXRfaWQ6IGV4aXN0aW5nLmlkLFxuICAgICAgcmVzZXJ2ZWRfYnk6IGV4aXN0aW5nLnJlc2VydmVkX2J5LFxuICAgICAgcmVhc29uOiAnYWxyZWFkeV9yZXNlcnZlZCcsXG4gICAgfSk7XG4gIH1cblxuICAvLyBRdWljayBzb2xkIG91dCBjaGVja1xuICBjb25zdCBhbnlBdmFpbGFibGUgPSBzZWF0cy5zb21lKHMgPT4gIXMuc3RhdHVzKTtcbiAgaWYgKCFhbnlBdmFpbGFibGUpIHtcbiAgbWV0cmljc1snc29sZE91dCddKys7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBzZWF0X2lkOiBudWxsLFxuICAgICAgcmVzZXJ2ZWRfYnk6IG51bGwsXG4gICAgICByZWFzb246ICdzb2xkX291dCcsXG4gICAgfSk7XG4gIH1cblxuICAvLyBSZXRyeSBsb29wXG4gIGZvciAobGV0IGF0dGVtcHQgPSAwOyBhdHRlbXB0IDwgTUFYX1JFVFJJRVM7IGF0dGVtcHQrKykge1xuICAgIGNvbnN0IHsgc2VhdCB9ID0gYXdhaXQgYXR0ZW1wdFJlc2VydmUocGhvbmUpO1xuICAgIGlmIChzZWF0KSB7XG4gIG1ldHJpY3NbJ3N1Y2Nlc3NlcyddKys7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHNlYXRfaWQ6IHNlYXQuaWQsXG4gICAgICAgIHJlc2VydmVkX2J5OiBzZWF0LnJlc2VydmVkX2J5LFxuICAgICAgICByZWFzb246IG51bGwsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiB3ZSBnZXQgaGVyZSwgdHJlYXQgYXMgY29udGVudGlvbiBmYWlsdXJlIChyYXJlIGluIHNpbmdsZS10aHJlYWQgc2ltdWxhdGlvbiBidXQga2VwdCBmb3Igc3BlYyBjb21wbGlhbmNlKVxuICBtZXRyaWNzWydjb250ZW50aW9uRmFpbHMnXSsrO1xuICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgc2VhdF9pZDogbnVsbCxcbiAgICByZXNlcnZlZF9ieTogcGhvbmUgPz8gbnVsbCxcbiAgICByZWFzb246ICdjb250ZW50aW9uJyxcbiAgfSk7XG59XG5cbi8vIChPcHRpb25hbCkgR0VUIGZvciBkZWJ1Z2dpbmcgLyBtZXRyaWNzIGluc3BlY3Rpb24gd2hpbGUgZGV2ZWxvcGluZy5cbi8vIEFkZGVkIHRlc3QgaGVscGVyOiBHRVQgP3Jlc2V0PTEgd2lsbCByZWluaXRpYWxpemUgdGhlIGluLW1lbW9yeSBzdGF0ZSAobm9uLXByb2R1Y3Rpb24gZmVhdHVyZSkuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCk7XG4gICAgaWYgKHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdyZXNldCcpID09PSAnMScpIHtcbiAgICAgIC8vIFJlaW5pdGlhbGl6ZSBzZWF0c1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWF0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzZWF0ID0gc2VhdHNbaV07XG4gICAgICAgIGlmICghc2VhdCkgY29udGludWU7XG4gICAgICAgIHNlYXQuc3RhdHVzID0gZmFsc2U7XG4gICAgICAgIHNlYXQucmVzZXJ2ZWRfYnkgPSBudWxsO1xuICAgICAgfVxuICAgICAgbWV0cmljcy5hdHRlbXB0cyA9IDA7XG4gICAgICBtZXRyaWNzLnN1Y2Nlc3NlcyA9IDA7XG4gICAgICBtZXRyaWNzLnNvbGRPdXQgPSAwO1xuICAgICAgbWV0cmljcy5jb250ZW50aW9uRmFpbHMgPSAwO1xuICAgICAgbWV0cmljcy5hbHJlYWR5ID0gMDtcbiAgICB9XG4gIH0gY2F0Y2ggey8qIGlnbm9yZSBtYWxmb3JtZWQgVVJMICovfVxuICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgc2VhdHM6IHNlYXRzLm1hcChzID0+ICh7IGlkOiBzLmlkLCBzdGF0dXM6IHMuc3RhdHVzLCByZXNlcnZlZF9ieTogcy5yZXNlcnZlZF9ieSB9KSksXG4gICAgbWV0cmljcyxcbiAgICByZW1haW5pbmc6IHNlYXRzLmZpbHRlcihzID0+ICFzLnN0YXR1cykubGVuZ3RoLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJydW50aW1lIiwicHJlZmVycmVkUmVnaW9uIiwiZmV0Y2hDYWNoZSIsImdsb2JhbEFueSIsImdsb2JhbFRoaXMiLCJpbml0aWFsIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwibWFwIiwiXyIsImkiLCJpZCIsInN0YXR1cyIsInJlc2VydmVkX2J5IiwiYXR0ZW1wdHMiLCJzdWNjZXNzZXMiLCJzb2xkT3V0IiwiY29udGVudGlvbkZhaWxzIiwiYWxyZWFkeSIsInNlYXRzIiwibWV0cmljcyIsIk1BWF9SRVRSSUVTIiwiZmluZFNlYXRCeVBob25lIiwicGhvbmUiLCJ1bmRlZmluZWQiLCJmaW5kIiwicyIsIm5leHRBdmFpbGFibGVTZWF0IiwiYXR0ZW1wdFJlc2VydmUiLCJNYXRoIiwicmFuZG9tIiwiUHJvbWlzZSIsInIiLCJzZXRUaW1lb3V0IiwiZmxvb3IiLCJzZWF0IiwiUE9TVCIsInJlcSIsImhlYWRlcnMiLCJnZXQiLCJpbmNsdWRlcyIsImJvZHkiLCJqc29uIiwiY2F0Y2giLCJ0cmltIiwiZXhpc3RpbmciLCJSZXNwb25zZSIsInN1Y2Nlc3MiLCJzZWF0X2lkIiwicmVhc29uIiwiYW55QXZhaWxhYmxlIiwic29tZSIsImF0dGVtcHQiLCJHRVQiLCJ1cmwiLCJVUkwiLCJzZWFyY2hQYXJhbXMiLCJyZW1haW5pbmciLCJmaWx0ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/v1/seats/reservation/fcfs/route.ts\n");

/***/ })

});